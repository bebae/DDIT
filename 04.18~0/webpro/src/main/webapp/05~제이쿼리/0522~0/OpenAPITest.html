<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <style>
    .div {
      margin: 10px auto;
      width: 90%;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="div">
    <!-- 제목 -->
    <h1>GPT-CHAP AI TEST</h1>

    <!-- 키워드 입력창 -->
    <!-- <label for="keywords">키워드:</label> -->
    <label for="keywords">질문:</label>
    <input type="text" id="keywords" name="keywords" required />
    <!-- 입력 버튼 -->
    <button type="button" class="btn btn-primary" onclick="search()">입력</button>
    <!-- 결과가 보이게 될 부분 -->
    <div id="result" class="mb-5 text-start"></div>

    <div class="row">
      <div class="col">
        <label for="text" class="col-form-label">질문</label>
      </div>
      <div class="input-group col col-lg-3">
        <input type="text" class="form-control" placeholder="Recipient's username" aria-label="Recipient's username"
          aria-describedby="button-addon2">
        <button class="btn btn-outline-secondary" type="button" id="button-addon2">질문하기</button>
      </div>
    </div>
    
    

  </div>

  <script>
    function search() {
      const api_key = "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";
      const keywords = document.getElementById('keywords').value
      const messages = [
        { role: 'system', content: 'You are a helpful assistant.' },
        // { role: 'user', content: keywords + '에 대하여 다루어 볼 만한 주제를 10가지 추천해줘.' },
        { role: 'user', content: keywords },

      ]
      const config = {
        headers: {
          Authorization: `Bearer ${api_key}`,
          'Content-Type': 'application/json',
        },
      }
      const data = {
        model: 'gpt-3.5-turbo',
        temperature: 0.5,
        n: 1,
        messages: messages,
      }
      axios
        .post('https://api.openai.com/v1/chat/completions', data, config)
        .then(function (response) {
          let resultDiv = document.getElementById('result')
          resultDiv.innerHTML = ''
          response.data.choices.forEach(function (choice, index) {
            resultDiv.innerHTML += `<div>${choice.message.content
              .split('\n')
              .join('<br/>')}</div>`
          })
        })
        .catch(function (error) {
          console.error(error)
        })
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
</body>

</html>